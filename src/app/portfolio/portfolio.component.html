<div class="portfolio-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-progress-spinner diameter="50" mode="indeterminate"></mat-progress-spinner>
    <p class="loading-text">{{ translate('portfolio.loading') }}</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="error-container">
    <mat-icon class="error-icon">error</mat-icon>
    <p class="error-message">{{ translate('portfolio.error') }}</p>
    <p class="error-details">{{ errorMessage }}</p>
  </div>

  <!-- Projects Grid -->
  <div *ngIf="projects.length > 0 && !isLoading" class="projects-container animate-fade-in">
    <div class="projects-grid">
      <div class="project-card modern-project-card animate-slide-in" 
           *ngFor="let project of pagedProjects; let i = index"
           [style.animation-delay]="(i * 0.1) + 's'">
        
        <!-- Project Header -->
        <div class="project-header">
          <div class="project-icon">
            <mat-icon>{{ getProjectIcon(project) }}</mat-icon>
          </div>
          <div class="project-meta">
            <h3 class="project-title">
              <a [href]="project.html_url" target="_blank" rel="noopener">{{ project.name }}</a>
            </h3>
            <div class="project-stats">
              <span class="stat-item" *ngIf="project.stargazers_count > 0">
                <mat-icon>star</mat-icon>
                {{ project.stargazers_count }}
              </span>
              <span class="stat-item" *ngIf="project.forks_count > 0">
                <mat-icon>fork_right</mat-icon>
                {{ project.forks_count }}
              </span>
              <span class="stat-item" *ngIf="project.language">
                <mat-icon>code</mat-icon>
                {{ project.language }}
              </span>
            </div>
          </div>
        </div>

        <!-- Project Description -->
        <div class="project-body">
          <p class="project-description">
            {{ project.description || 'No description available' }}
          </p>
          
          <!-- Technologies/Topics -->
          <div class="technologies" *ngIf="project.topics && project.topics.length > 0">
            <mat-chip-set>
              <mat-chip *ngFor="let topic of project.topics.slice(0, 5)" class="tech-chip">
                {{ topic }}
              </mat-chip>
              <mat-chip *ngIf="project.topics.length > 5" class="more-chip">
                +{{ project.topics.length - 5 }}
              </mat-chip>
            </mat-chip-set>
          </div>
        </div>

        <!-- Project Actions -->
        <div class="project-actions">
          <button mat-raised-button 
                  color="primary" 
                  class="action-btn primary-btn"
                  (click)="openLink(project.html_url)">
            <mat-icon>code</mat-icon>
            {{ translate('portfolio.sourceCode') }}
          </button>
          
          <button *ngIf="project.homepage" 
                  mat-raised-button 
                  class="action-btn secondary-btn"
                  (click)="openLink(project.homepage)">
            <mat-icon>launch</mat-icon>
            {{ translate('portfolio.viewProject') }}
          </button>
        </div>

        <!-- Project Footer -->
        <div class="project-footer">
          <span class="last-updated">
            Updated {{ getRelativeTime(project.updated_at) }}
          </span>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination-container" *ngIf="totalPages > 1">
      <mat-paginator 
        [length]="projects.length"
        [pageSize]="itemsPerPage"
        [pageSizeOptions]="[4, 8, 12]"
        [pageIndex]="currentPage - 1"
        (page)="onPageChange($event)"
        showFirstLastButtons>
      </mat-paginator>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="projects.length === 0 && !isLoading && !errorMessage" class="empty-state">
    <mat-icon class="empty-icon">folder_open</mat-icon>
    <h3>No projects found</h3>
    <p>This user doesn't have any public repositories.</p>
  </div>
</div>
